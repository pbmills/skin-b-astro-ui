---
const text = ["Bioavailable Actives", "Regenerative Farming", "All Skin Types"];
---

<section class="w-full">
	<div class="outer overflow-hidden marquee-parent">
		<h2
			class="marquee heading-2 uppercase font-semibold flex items-baseline whitespace-nowrap will-change-transform"
		>
			<div class="marquee-content shrink-0 flex">
				{
					text.map((t) => (
						<span class="flex items-baseline">
							<span>{t}</span>
							<span>&nbsp;Â·&nbsp;</span>
						</span>
					))
				}
			</div>
		</h2>
	</div>
</section>

<script>
	import gsap from "gsap";

	document.addEventListener("DOMContentLoaded", () => {
		const marquee = document.querySelector(
			".marquee",
		) as HTMLElement | null;
		if (marquee) {
			const content = marquee.querySelector(
				".marquee-content",
			) as HTMLElement | null;

			if (marquee && content) {
				// Clone the content
				const clone1 = content.cloneNode(true);
				const clone2 = content.cloneNode(true);
				marquee.appendChild(clone1);
				marquee.appendChild(clone2);

				const contentWidth = content.offsetWidth;

				marquee.style.width = `${contentWidth * 3}px`;

				gsap.to(marquee, {
					x: -contentWidth,
					duration: 6,
					ease: "linear",
					repeat: -1,
					modifiers: {
						x: (x) => `${parseFloat(x) % contentWidth}px`,
					},
				});
			}
		}
	});
</script>

<style>
	.marquee-parent {
		mask-image: linear-gradient(
			to right,
			transparent,
			black 20%,
			black 80%,
			transparent
		);
	}
</style>
